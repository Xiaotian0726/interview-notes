- [0、TCP/UDP 的区别](#0tcpudp-的区别)
- [1、TCP 三次握手的过程及原因](#1tcp-三次握手的过程及原因)
- [2、HTTP 协议包含哪些请求](#2http-协议包含哪些请求)
- [3、在浏览器中输入 URL 地址到显示主页的过程](#3在浏览器中输入-url-地址到显示主页的过程)
- [4、HTTP 的长连接和短连接](#4http-的长连接和短连接)
- [5、OSI 七层模型](#5osi-七层模型)
- [6、应用层协议举例](#6应用层协议举例)
- [7、TCP 如何保证可靠传输](#7tcp-如何保证可靠传输)
- [8、TCP 四次挥手](#8tcp-四次挥手)
- [9、为什么有了 IP 还需要 UDP](#9为什么有了-ip-还需要-udp)
# 0、TCP/UDP 的区别
TCP和UDP都是OSI参考模型中的传输层协议。

TCP面向连接，提供可靠的服务，数据传输慢；UDP发送数据前不需要建立连接，把可靠数据传输的任务交给应用层处理，数据传输快。

TCP面向字节流，UDP面向报文。

# 1、TCP 三次握手的过程及原因
TCP三次握手的目的：同步双方的序列号、交换TCP的窗口大小信息、确认双方的发送和接收能力。

第一次握手：客户端发送请求报文，SYN置为1，Seq为x，发送完毕后客户端进入SYN_SEND状态，等待服务器确认；  
第二次握手：服务器端接收到客户端的SYN报文段后，需要发送SYN/ACK报文，设置ACK为x+1，SYN置为1，Seq为y，发送完毕后服务器进入SYN_RECV状态；  
第三次握手：客户端收到SYN/ACK报文，向服务器发送ACK报文，Seq设为y+1。三次握手完成后，双方进入ESTABLISHED状态

原因：建立可靠的通信信道，双方确认双方的发送与接收是正常的。  
第一次握手：Client什么也不能确认，Server确认了对方能正确发送；  
第二次握手：Cient确认自己发送、接收正常，对方发送、接受正常，Server确认自己接受正常，对方发送正常；  
第三次握手：双方确认双方的发送、接受正常

# 2、HTTP 协议包含哪些请求
GET：对服务器资源的请求  
POST：提交用户数据的请求

# 3、在浏览器中输入 URL 地址到显示主页的过程
浏览器查找域名的IP地址（浏览器缓存、路由器缓存、DNS缓存）；  
浏览器向Web服务器发送一个HTTP请求；  
服务器处理并响应请求；  
浏览器显示HTML文件；

# 4、HTTP 的长连接和短连接
HTTP/1.0 中默认使用短连接，客户端和服务器每进行一次HTTP操作就建立一次连接，任务结束就中断连接。  
而从HTTP/1.1起，默认使用长连接，体现在响应头里加入的一段代码：

    Connection:keep-alive

在使用长连接的情况下，当一个网页打开完成后，客户端和服务器之间用于传输HTTP数据的TCP连接不会关闭。客户端再次访问这个服务器时，会继续使用这一条已经建立的连接。keep-alive不会永久保持连接，它有一个可以设定的保持时间

# 5、OSI 七层模型
物理层：在物理链路上透明地传输比特流  
数据链路层：成帧，建立逻辑连接，进行硬件地址寻址、差错校验等功能  
网络层：不同网络间的路由选择  
传输层：定义传输数据的端口号，差错控制、流量控制  
会话层：对话的建立、管理  
表示层：数据的表示、加密、压缩  
应用层：网络服务与用户的接口

# 6、应用层协议举例
HTTP：超文本传输协议  
FTP：文件传输协议  
SMTP：简单邮件传输协议  
POP3：邮局协议版本3  
Telnet：远程登录协议

# 7、TCP 如何保证可靠传输
TCP分组首部的校验和保证了差错控制，使用滑动窗口来实现流量控制，检测到网络拥塞时减少数据的发送来实现拥塞控制。

TTCP协议给发送的每一个包进行编号，在滑动窗口的基础上，采用捎带应答、超时重传、丢弃重复分组的方式来保证传输的可靠性。

# 8、TCP 四次挥手
(1) 客户端发送FIN报文请求释放连接，进入FIN_WAIT1状态  
(2) 服务器发送ACK报文，进入CLOSED_WAIT状态。此ACK报文被客户端收到后，客户端进入FIN_WAIT2状态  
(3) 服务器处理完数据后，也向客户端发送FIN报文  
(4) 客户端回复ACK报文

TCP握手可以只有三次，因为当Server端收到Client端的SYN连接请求报文后，可以直接发送SYN+ACK报文（捎带应答）。

TCP断开连接需要四次挥手，是因为当Server端收到FIN报文时很可能正在传输数据或者仍然有数据要传输，所以只能先回复一个ACK报文。只有等到Server端所有的报文都发送完了，才能主动发送FIN报文。

# 9、为什么有了 IP 还需要 UDP
还需要UDP指定端口号来完成进程之间的网络通信。UDP指定端口号范围为0 ~ 65535